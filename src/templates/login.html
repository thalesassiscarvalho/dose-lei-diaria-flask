{% extends "base.html" %}

{% block title %}Login - Estudo da Lei Seca{% endblock %}

{% block content %}
<div class="max-w-md mx-auto mt-12 bg-white border border-gray-200 shadow-lg rounded-lg p-8 card-hover fade-in-up login-container">
    <h1 class="text-3xl font-bold text-center mb-8" style="color: #2563eb;">Login</h1>
    <form method="POST" action="{{ url_for("auth.login") }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"> {# <-- Campo CSRF oculto #}
        <div class="mb-5">
            <label for="email" class="block text-brand-text text-sm font-bold mb-2">Email:</label>
            <input type="email" id="email" name="email" required 
                   class="shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-2 px-3 text-brand-text leading-tight focus:outline-none focus:border-transparent placeholder-gray-400 form-input-focus"
                   style="focus:ring: 2px solid #60a5fa;">
        </div>
        <div class="mb-6">
            <label for="password" class="block text-brand-text text-sm font-bold mb-2">Senha:</label>
            <input type="password" id="password" name="password" required 
                   class="shadow-sm appearance-none border border-gray-300 rounded-lg w-full py-2 px-3 text-brand-text leading-tight focus:outline-none focus:border-transparent placeholder-gray-400 form-input-focus"
                   style="focus:ring: 2px solid #60a5fa;">
        </div>
        <div class="text-center">
            <button type="submit" class="w-full text-white font-bold py-2 px-4 rounded-lg focus:outline-none transition duration-300 text-lg btn-transition"
                    style="background-color: #2563eb; border: none;">
                Entrar
            </button>
        </div>
    </form>
    <p class="text-center text-brand-text-light text-sm mt-8">
        Não tem uma conta? <a href="{{ url_for("auth.signup") }}" class="font-bold transition-all duration-300" style="color: #1d4ed8;">Cadastre-se</a>
    </p>
    <p class="text-center text-brand-text-light text-sm mt-4">
        Esqueceu sua senha? <a href="{{ url_for('auth.forgot_password') }}" class="font-bold transition-all duration-300" style="color: #1d4ed8;">Recuperar senha</a>
    </p>
</div>

<style>
/* APENAS DESKTOP - Fundo com documentos legais */
@media (min-width: 769px ) {
    body {
        background-image: url('{{ url_for("static", filename="backgroundlogin.webp") }}');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        background-attachment: fixed;
        min-height: 100vh;
    }

    /* Overlay para melhorar legibilidade - APENAS DESKTOP */
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.30);
        z-index: -1;
    }

    /* Container do formulário com glass-morphism - APENAS DESKTOP */
    .login-container {
        background: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.3) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15) !important;
    }

    /* Header com transparência - APENAS DESKTOP */
    header, nav {
        background: rgba(37, 99, 235, 0.95) !important;
        backdrop-filter: blur(10px);
    }
}

/* MOBILE - Fundo com cor sólida */
@media (max-width: 768px) {
    body {
        background-color: #2D68EB; /* Cor sólida para mobile, muito mais rápido! */
        min-height: 100vh;
    }

    /* Overlay não é mais necessário com cor sólida, mas pode ser mantido se desejar um efeito */
    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.0); /* Removido o overlay, mas mantido para estrutura */
        z-index: -1;
    }
    
    /* Container do formulário com glass-morphism - MOBILE */
    .login-container {
        background: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15) !important;
        margin: 10px;
        margin-top: 2rem;
    }

    /* Header com transparência - MOBILE */
    header, nav {
        background: rgba(37, 99, 235, 0.95) !important;
        backdrop-filter: blur(10px);
    }
}

/* Estilos gerais */
.form-input-focus:focus {
    background: rgba(255, 255, 255, 0.98);
    box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.3), 0 4px 12px rgba(0, 0, 0, 0.1);
}

.btn-transition {
    box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
    transition: all 0.3s ease;
}

.btn-transition:hover {
    background-color: #1d4ed8 !important;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
}

.fade-in-up {
    animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>
{% endblock %}
